<UserControl x:Class="BlenderMarket.PaginaCatalogo"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Loaded="PaginaCatalogo_Loaded"
             HorizontalAlignment="Stretch"
             VerticalAlignment="Stretch">

    <!-- FONDO GENERAL -->
    <Grid Background="#F2F2F2">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- BARRA DE BÚSQUEDA Y FILTROS -->
        <Border Grid.Row="0"
                Background="#2C2C2C"
                Padding="15"
                BorderBrush="#444"
                BorderThickness="0,0,0,1">

            <StackPanel>

                <TextBlock Text="🛍️ CATÁLOGO DE MODELOS 3D"
                           FontSize="20"
                           FontWeight="Bold"
                           Foreground="#F5792A"
                           Margin="0,0,0,15"/>

                <StackPanel Orientation="Horizontal">

                    <!-- Buscador -->
                    <TextBox x:Name="txtBusqueda"
                             Width="250"
                             Height="40"
                             Padding="10"
                             FontSize="14"
                             Background="#E6E6E6"
                             BorderBrush="#7A7A7A"
                             VerticalContentAlignment="Center"
                             Margin="0,0,10,0"
                             TextChanged="TxtBusqueda_TextChanged"/>

                    <!-- Categorías -->
                    <ComboBox x:Name="cmbFiltroCategoria"
                              Width="150"
                              Height="35"
                              FontSize="14"
                              Background="#E6E6E6"
                              BorderBrush="#7A7A7A"
                              Padding="5"
                              Margin="0,0,10,0"
                              SelectionChanged="CmbFiltroCategoria_SelectionChanged">
                        <ComboBoxItem Content="Todas las categorías" IsSelected="True"/>
                        <ComboBoxItem Content="Personajes"/>
                        <ComboBoxItem Content="Creaturas"/>
                        <ComboBoxItem Content="Medio Ambiente"/>
                        <ComboBoxItem Content="Props"/>
                        <ComboBoxItem Content="Arquitectura"/>
                        <ComboBoxItem Content="Vehiculos"/>
                        <ComboBoxItem Content="Herramientas"/>
                    </ComboBox>

                    <!-- Ordenar -->
                    <ComboBox x:Name="cmbOrdenar"
                              Width="150"
                              Height="35"
                              FontSize="14"
                              Background="#E6E6E6"
                              BorderBrush="#7A7A7A"
                              Padding="5"
                              Margin="0,0,10,0"
                              SelectionChanged="CmbOrdenar_SelectionChanged">
                        <ComboBoxItem Content="Más recientes" IsSelected="True"/>
                        <ComboBoxItem Content="Más descargados"/>
                        <ComboBoxItem Content="Precio: Menor a Mayor"/>
                        <ComboBoxItem Content="Precio: Mayor a Menor"/>
                        <ComboBoxItem Content="A-Z"/>
                    </ComboBox>

                    <!-- Contador -->
                    <TextBlock x:Name="txtContador"
                               Text="0 modelos"
                               FontSize="14"
                               Foreground="#E6E6E6"
                               VerticalAlignment="Center"
                               Margin="10,0,0,0"/>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- LISTA DE MODELOS -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Background="#F2F2F2">
            <ItemsControl x:Name="itemsControlModelos" Margin="10">

                <ItemsControl.ItemTemplate>
                    <DataTemplate>

                        <Border Background="White"
                                BorderBrush="#D9D9D9"
                                BorderThickness="1"
                                CornerRadius="6"
                                Margin="0,0,0,10"
                                Padding="15">

                            <Grid>

                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <!-- Icono del modelo -->
                                <Border Grid.Column="0"
                                        Width="80"
                                        Height="80"
                                        Background="#E6E6E6"
                                        CornerRadius="5"
                                        Margin="0,0,15,0">

                                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                                        <TextBlock Text="🎨" FontSize="30"/>
                                        <TextBlock Text="{Binding Tipo}"
                                                   FontSize="10"
                                                   Foreground="#7A7A7A"
                                                   HorizontalAlignment="Center"/>
                                    </StackPanel>

                                </Border>

                                <!-- Información -->
                                <StackPanel Grid.Column="1" VerticalAlignment="Center">

                                    <TextBlock Text="{Binding Nombre}"
                                               FontSize="16"
                                               FontWeight="Bold"
                                               Foreground="#2C2C2C"/>

                                    <TextBlock Text="{Binding Descripcion}"
                                               FontSize="12"
                                               Foreground="#7A7A7A"
                                               TextWrapping="Wrap"
                                               Margin="0,5,0,0"/>

                                    <StackPanel Orientation="Horizontal" Margin="0,10,0,0">

                                        <TextBlock Text="Categoría:"
                                                   FontSize="11"
                                                   Foreground="#7A7A7A"/>
                                        <TextBlock Text="{Binding Categoria}"
                                                   FontSize="11"
                                                   FontWeight="Bold"
                                                   Foreground="#F5792A"
                                                   Margin="5,0,15,0"/>

                                        <TextBlock Text="Descargas:"
                                                   FontSize="11"
                                                   Foreground="#7A7A7A"/>
                                        <TextBlock Text="{Binding ContadorDescargas}"
                                                   FontSize="11"
                                                   FontWeight="Bold"
                                                   Foreground="#2C2C2C"
                                                   Margin="5,0,0,0"/>

                                    </StackPanel>

                                </StackPanel>

                                <!-- Precio & botones -->
                                <StackPanel Grid.Column="2"
                                            VerticalAlignment="Center"
                                            Width="150">

                                    <TextBlock Text="{Binding Precio, StringFormat='Bs. {0:F2}'}"
                                               FontSize="24"
                                               FontWeight="Bold"
                                               Foreground="#F5792A"
                                               HorizontalAlignment="Center"/>

                                    <Button Content="➕ Agregar al Carrito"
                                            Height="35"
                                            FontSize="12"
                                            Background="#F5792A"
                                            Foreground="White"
                                            Margin="0,10,0,5"
                                            Tag="{Binding Id}"
                                            Click="BtnAgregarCarrito_Click"/>

                                    <Button Content="📥 Descargar"
                                            Height="35"
                                            FontSize="12"
                                            Background="#7A7A7A"
                                            Foreground="White"
                                            Tag="{Binding Id}"
                                            Click="BtnDescargar_Click"/>

                                </StackPanel>

                            </Grid>

                        </Border>

                    </DataTemplate>
                </ItemsControl.ItemTemplate>

            </ItemsControl>
        </ScrollViewer>

        <!-- SIN MODELOS -->
        <Border x:Name="borderSinModelos"
                Grid.Row="1"
                Background="#F2F2F2"
                Visibility="Collapsed">

            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">

                <TextBlock Text="📭" FontSize="60" Margin="0,0,0,20"/>
                <TextBlock Text="No hay modelos disponibles"
                           FontSize="18"
                           Foreground="#2C2C2C"/>
                <TextBlock Text="¡Sé el primero en subir un modelo!"
                           FontSize="14"
                           Foreground="#7A7A7A"
                           Margin="0,10,0,0"/>

            </StackPanel>

        </Border>

    </Grid>
</UserControl>
