<UserControl x:Class="BlenderMarket.PaginaCarrito"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Width="754" Height="540">

    <!-- FONDO GENERAL -->
    <Grid Background="#F2F2F2">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- HEADER (gris oscuro Blender) -->
        <Border Grid.Row="0" Background="#2C2C2C" Padding="15">
            <StackPanel>
                <TextBlock Text="🛒 MI CARRITO DE COMPRAS"
                           FontSize="20"
                           FontWeight="Bold"
                           Foreground="#F5792A"/>

                <TextBlock x:Name="txtResumen"
                           Text="0 items - Bs. 0.00"
                           FontSize="14"
                           Foreground="#E6E6E6"
                           Margin="0,5,0,0"/>
            </StackPanel>
        </Border>

        <!-- LISTA DE ITEMS -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Background="#F2F2F2">
            <ItemsControl x:Name="itemsControlCarrito" Margin="10">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Background="White"
                                BorderBrush="#D9D9D9"
                                BorderThickness="1"
                                CornerRadius="6"
                                Margin="0,0,0,10"
                                Padding="15">

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <!-- Ícono -->
                                <Border Grid.Column="0"
                                        Width="60"
                                        Height="60"
                                        Background="#E6E6E6"
                                        CornerRadius="5"
                                        Margin="0,0,15,0">
                                    <TextBlock Text="🎨"
                                               FontSize="24"
                                               HorizontalAlignment="Center"
                                               VerticalAlignment="Center"/>
                                </Border>

                                <!-- Información -->
                                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                    <TextBlock Text="{Binding Modelo.Nombre}"
                                               FontSize="16"
                                               FontWeight="Bold"
                                               Foreground="#2C2C2C"/>

                                    <TextBlock Text="{Binding Modelo.Categoria}"
                                               FontSize="12"
                                               Foreground="#F5792A"
                                               Margin="0,5,0,0"/>

                                    <TextBlock Text="{Binding Modelo.Tipo}"
                                               FontSize="11"
                                               Foreground="#7A7A7A"/>
                                </StackPanel>

                                <!-- Cantidad -->
                                <StackPanel Grid.Column="2"
                                            VerticalAlignment="Center"
                                            Width="150"
                                            Margin="20,0">

                                    <StackPanel Orientation="Horizontal"
                                                HorizontalAlignment="Center">

                                        <Button Content="−"
                                                Width="30" Height="30"
                                                FontSize="16"
                                                Background="#7A7A7A"
                                                Foreground="White"
                                                Tag="{Binding Modelo.Id}"
                                                Click="BtnDisminuirCantidad_Click"/>

                                        <TextBlock Text="{Binding Cantidad}"
                                                   Width="40"
                                                   TextAlignment="Center"
                                                   FontSize="16"
                                                   FontWeight="Bold"
                                                   VerticalAlignment="Center"/>

                                        <Button Content="+"
                                                Width="30" Height="30"
                                                FontSize="16"
                                                Background="#F5792A"
                                                Foreground="White"
                                                Tag="{Binding Modelo.Id}"
                                                Click="BtnAumentarCantidad_Click"/>
                                    </StackPanel>

                                    <TextBlock Text="{Binding Modelo.Precio, StringFormat='Bs. {0:F2} c/u'}"
                                               FontSize="12"
                                               Foreground="#7A7A7A"
                                               HorizontalAlignment="Center"
                                               Margin="0,5,0,0"/>
                                </StackPanel>

                                <!-- Subtotal -->
                                <StackPanel Grid.Column="3"
                                            VerticalAlignment="Center"
                                            Width="120">

                                    <TextBlock Text="{Binding Subtotal, StringFormat='Bs. {0:F2}'}"
                                               FontSize="20"
                                               FontWeight="Bold"
                                               Foreground="#F5792A"
                                               HorizontalAlignment="Right"/>

                                    <Button Content="🗑️ Eliminar"
                                            Height="30"
                                            FontSize="11"
                                            Background="#D93F21"
                                            Foreground="White"
                                            Margin="0,10,0,0"
                                            Tag="{Binding Modelo.Id}"
                                            Click="BtnEliminarItem_Click"/>
                                </StackPanel>
                            </Grid>

                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>

        <!-- CARRITO VACÍO -->
        <Border x:Name="borderCarritoVacio"
                Grid.Row="1"
                Background="#F2F2F2"
                Visibility="Collapsed">
            <StackPanel HorizontalAlignment="Center"
                        VerticalAlignment="Center">

                <TextBlock Text="🛒"
                           FontSize="60"
                           Margin="0,0,0,20"/>

                <TextBlock Text="Tu carrito está vacío"
                           FontSize="18"
                           Foreground="#2C2C2C"/>

                <TextBlock Text="Agrega modelos desde el catálogo"
                           FontSize="14"
                           Foreground="#7A7A7A"
                           Margin="0,10,0,0"/>

                <Button Content="Ir al Catálogo"
                        Width="150"
                        Height="40"
                        Background="#F5792A"
                        Foreground="White"
                        Margin="0,20,0,0"
                        Click="BtnIrCatalogo_Click"/>
            </StackPanel>
        </Border>

        <!-- RESUMEN TOTAL Y BOTONES -->
        <Border Grid.Row="2"
                Background="#2C2C2C"
                Padding="15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Resumen del total -->
                <StackPanel Grid.Column="0">
                    <TextBlock Text="RESUMEN DE COMPRA"
                               FontSize="14"
                               FontWeight="Bold"
                               Foreground="#FFFFFF"/>

                    <StackPanel Orientation="Horizontal" Margin="0,5,0,0">
                        <TextBlock Text="Total:"
                                   FontSize="16"
                                   Foreground="#E6E6E6"/>

                        <TextBlock x:Name="txtTotal"
                                   Text="Bs. 0.00"
                                   FontSize="24"
                                   FontWeight="Bold"
                                   Foreground="#F5792A"
                                   Margin="10,0,0,0"/>
                    </StackPanel>
                </StackPanel>

                <!-- Botones -->
                <StackPanel Grid.Column="1"
                            Orientation="Horizontal">

                    <Button x:Name="btnVaciarCarrito"
                            Content="Vaciar Carrito"
                            Width="120"
                            Height="40"
                            Background="#D93F21"
                            Foreground="White"
                            Click="BtnVaciarCarrito_Click"/>

                    <Button x:Name="btnContinuarComprando"
                            Content="← Seguir Comprando"
                            Width="150"
                            Height="40"
                            Background="#7A7A7A"
                            Foreground="White"
                            Margin="10,0,0,0"
                            Click="BtnContinuarComprando_Click"/>

                    <Button x:Name="btnProcederPago"
                            Content="Pagar Ahora →"
                            Width="150"
                            Height="40"
                            Background="#F5792A"
                            Foreground="White"
                            FontWeight="Bold"
                            Margin="10,0,0,0"
                            Click="BtnProcederPago_Click"/>
                </StackPanel>
            </Grid>
        </Border>

    </Grid>
</UserControl>
